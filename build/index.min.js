let e={init:function(){e.t=document.querySelector('.grid-cell[data-label="CampusSlides"]');e.form=document.createElement("FORM");e.form.classList.add("grid-cell","grid-cell-vertical","static","slides-form");e.form.action="https://gcm.schule/slides/submit/";e.form.method="POST";e.form.target="_blank";e.form.innerHTML=`<h2>CampusSlides</h2><textarea class="cisui-textarea" name="slides-md"></textarea><button type="submit" class="cisui-button">slide it!</button>`;e.t.parentNode.replaceChild(e.form,e.t)}};document.addEventListener("DOMContentLoaded",e.init);let i={load:function(){i.t=document.querySelector('.grid-cell[data-label="Snake"]');i.t.addEventListener("click",i.init)},init:function(){i.t.removeEventListener("click",i.init);i.t.addEventListener("click",i.start);i.t.classList.add("static");i.t.classList.add("snake");i.t.innerHTML="";i.canvas=document.createElement("CANVAS");i.canvas.width=16;i.canvas.height=16;i.t.appendChild(i.canvas);i.i=i.canvas.getContext("2d");document.body.addEventListener("keydown",i.control);i.o=[];i.l={};i.start()},start:function(){i.o=[{x:2,y:7},{x:3,y:7},{x:4,y:7}];i.direction=i.u.right;i.m=false;i.p();if(i.interval)window.clearInterval(i.interval);i.interval=window.setInterval(i.loop,200);i.h()},loop:function(){if(!i.m){i.move();if(i.k(i.l.x,i.l.y)){let e=i.o[i.o.length-1];e={x:e.x,y:e.y};i.o.splice(0,0,e);i.p()}i.h();document.title="Score: "+(i.o.length-3)+" | Snake"}else{document.title="GAME OVER – <SPACE> to restart"}},h:function(){let o=i.i.getImageData(0,0,16,16);for(let t=0;t<16;t++){for(let e=0;e<16;e++){if(i.k(t,e)){n(t,e,[85,136,51,255])}else if(i.l.x==t&&i.l.y==e){n(t,e,[119,170,51,255])}else{n(t,e,[51,51,51,255])}}}i.i.putImageData(o,0,0);function n(e,t,n){let i=(t*16+e)*4;o.data[i]=n[0];o.data[i+1]=n[1];o.data[i+2]=n[2];o.data[i+3]=n[3]}},move:function(){i.o.splice(0,1);let e=i.o[i.o.length-1];e={x:e.x,y:e.y};switch(i.direction){case i.u.right:e.x++;break;case i.u.g:e.y++;break;case i.u.left:e.x--;break;case i.u.v:e.y--}if(i.k(e.x,e.y)||e.x>15||e.x<0||e.y>15||e.y<0){i.m=true}i.o.push(e)},control:function(e){if(e.target!=document.body)return;switch(e.keyCode){case 87:case 38:if(i.direction!=i.u.g)i.direction=i.u.v;break;case 65:case 37:if(i.direction!=i.u.right)i.direction=i.u.left;break;case 83:case 40:if(i.direction!=i.u.v)i.direction=i.u.g;break;case 68:case 39:if(i.direction!=i.u.left)i.direction=i.u.right;break;case 32:i.start();default:return}e.preventDefault()},u:{right:0,g:1,left:2,v:3},p:function(){let e=true;while(e){i.l.x=Math.floor(Math.random()*16);i.l.y=Math.floor(Math.random()*16);e=i.k(i.l.x,i.l.y)}},k:function(t,n){for(let e=0;e<i.o.length;e++){if(i.o[e].x==t&&i.o[e].y==n){return true}}return false}};document.addEventListener("DOMContentLoaded",i.load);let o={init:function(){o.t=document.querySelector('.grid-cell[data-label="Timer"]');o.t.classList.add("timer");o.t.classList.add("static");o.t.innerHTML="";o.elements=[];o.elements.D=e("DIV","time-container");o.t.appendChild(o.elements.D);o.elements.I=e("DIV","time-input hour","00");o.elements.V=e("DIV","time-input minute","10");o.elements.M=e("DIV","time-input second","00");o.elements.D.appendChild(o.elements.I);o.elements.D.appendChild(document.createTextNode(":"));o.elements.D.appendChild(o.elements.V);o.elements.D.appendChild(document.createTextNode(":"));o.elements.D.appendChild(o.elements.M);o.elements.O=e("DIV","button-container");o.t.appendChild(o.elements.O);o.elements.C=e("BUTTON","button","löschen");o.elements.K=e("BUTTON","button primary","start");o.elements.O.appendChild(o.elements.C);o.elements.O.appendChild(o.elements.K);o.elements.K.onclick=o.start;o.elements.C.onclick=o.clear;document.body.addEventListener("click",o.S);document.body.addEventListener("keydown",o.T);function e(e,t,n){let i=document.createElement(e);i.setAttribute("class",t);i.innerHTML=n||"";return i}},A:function(e,t,n,i){o.elements.K.innerText=e;o.elements.C.innerText=n;if(t)o.elements.K.onclick=t;if(i)o.elements.C.onclick=i},start:function(){o.A("pause",o.stop,"abbrechen",o.clear);o.timeout=window.setInterval(o.update,1e3);o.update();o.t.classList.add("running")},stop:function(){o.A("weiter",o.start,"abbrechen",o.clear);window.clearInterval(o.timeout);o.t.classList.remove("running")},clear:function(){o.A("start",o.start,"löschen",o.clear);o.elements.K.disabled=false;window.clearInterval(o.timeout);o.t.classList.remove("running");o.t.classList.remove("done");o.elements.I.innerText="00";o.elements.V.innerText="10";o.elements.M.innerText="00"},end:function(){o.elements.C.innerText="fertig";o.elements.K.disabled=true;window.clearInterval(o.timeout);o.t.classList.add("done")},update:function(){let e=parseInt(o.elements.I.innerText);let t=parseInt(o.elements.V.innerText);let n=parseInt(o.elements.M.innerText);n--;if(n<0){n=59;t--;if(t<0){t=59;e--;if(e<0){e=0;t=0;n=0;o.end()}}}o.elements.I.innerText=(e+"").padStart(2,"0");o.elements.V.innerText=(t+"").padStart(2,"0");o.elements.M.innerText=(n+"").padStart(2,"0")},S:function(e){let t=o.t.querySelector(".time-input.focussed");if(t){t.classList.remove("focussed")}if(e.target.classList.contains("time-input")&&!o.t.classList.contains("running")){e.target.classList.add("focussed")}},T:function(e){let t=o.t.querySelector(".time-input.focussed");if(t){if(e.key.match("^[0-9]$")){if(t.innerText.charAt(0)==="0"){t.innerText=t.innerText.substring(1)}else{t.innerText="0"}t.innerText+=e.key;if(t.innerText.charAt(0)!=="0"){o.L.B(t)}}else if(e.keyCode==8){if(t.innerText==="00"){o.L.N(t)}else{t.innerText=("0"+t.innerText).substring(0,2)}}else if(e.keyCode==9){if(e.shiftKey){if(o.L.N(t))e.preventDefault()}else{if(o.L.B(t))e.preventDefault()}}else if(e.keyCode==37){o.L.N(t)}else if(e.keyCode==39){o.L.B(t)}else if(!e.ctrlKey&&!e.metaKey){e.preventDefault()}}},L:{N:function(e){let t=e.previousElementSibling||e;e.classList.remove("focussed");t.classList.add("focussed");return e!=t},B:function(e){let t=e.nextElementSibling||e;e.classList.remove("focussed");t.classList.add("focussed");return e!=t}}};document.addEventListener("DOMContentLoaded",o.init);let c={init:function(){c.t=document.querySelector('.grid-cell[data-label="Vertretungsplan"]');c.t.classList.add("vertretungsplan");c.t.classList.add("static");c.t.innerHTML="";c.elements=[];const e="http://@@@@@@@@@@.@@@@@.@@@@@@@.net/example_data.json";fetch(e).then(e=>{if(e.ok){return e.json()}else{c.error(c.j.P)}}).then(e=>{c.F(e)}).catch(e=>{c.error(c.j.P)})},F:function(e){const t=["Tag","Time","Informationen"];let n=e[0];if(n=="false")return c.error(c.j.empty);c.elements.R=d("vp-container");c.t.appendChild(c.elements.R);for(entryKey in n){let f=n[entryKey];if(!t.includes(entryKey)){let e=parseInt(entryKey);let t=d("vp-header");let n=d("class-label",entryKey);let r=d("vp-body");t.appendChild(n);c.elements.R.appendChild(t);c.elements.R.appendChild(r);for(contentKey in f){let e=f[contentKey];let t=e["U"]||"";let n=e["_"]||"";let i=e["q"]!="---"?e["q"]:"";let o=(e["G"]||"").trim();let c=(e["$"]||"").trim();let l=d("vp-content");let u=d("vp-content1",t+(t==""?"":". ")+n);let a=d("vp-content2",i);let s=d("vp-content3",c+(c==""||o==""?"":": ")+o);l.appendChild(u);l.appendChild(a);l.appendChild(s);r.appendChild(l)}}}function d(e,t){let n=document.createElement("DIV");n.setAttribute("class",e);n.innerHTML=t||"";return n}},error:function(e){if(Object.values(c.j).indexOf(e)>-1){console.error(e)}else{console.error("unknown error")}c.t.innerHTML="";c.t.appendChild(document.createTextNode("Kein Vertretungsplan verfügbar"));let t=document.createElement("A");t.innerHTML="DSB";t.setAttribute("href","https://dsbmobile.de");t.setAttribute("class","button primary");c.t.appendChild(t);let n=document.createElement("DIV");n.innerHTML=e;n.classList.add("subtitle");c.t.appendChild(n)},j:{P:"network unreachable or request failed",empty:"no data available"}};document.addEventListener("DOMContentLoaded",c.init);
